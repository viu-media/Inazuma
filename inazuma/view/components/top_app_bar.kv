#:set SPACING_SM dp(8)
#:set SPACING_MD dp(16)
#:set SPACING_LG dp(24)
#:set SEARCH_MIN_WIDTH dp(200)
#:set SEARCH_MAX_WIDTH dp(600)

<SearchBar>:
    pos_hint: {'center_x': 0.5, 'top': 1}
    adaptive_height: True
    size_hint_x: 1
    spacing: SPACING_MD
    padding: SPACING_LG, SPACING_MD

    MDBoxLayout:
        size_hint_x: 1
        spacing: SPACING_MD

        Widget:
            size_hint_x: 1

        MDTextField:
            size_hint_x: None
            width: min(SEARCH_MAX_WIDTH, max(SEARCH_MIN_WIDTH, root.width * 0.5))
            pos_hint: {'center_y': 0.5}
            required: True
            on_text_validate:
                app.search_for_anime(args[0])

            MDTextFieldLeadingIcon:
                icon: "magnify"

            MDTextFieldHintText:
                text: "Search for anime"

        Widget:
            size_hint_x: 1

    MDIconButton:
        pos_hint: {'center_y': 0.5}
        icon: "account-circle"
        theme_font_size: "Custom"
        font_size: "40sp"
        size_hint: None, None
        size: "48dp", "48dp"
        on_release: app.auth_popup.open()
